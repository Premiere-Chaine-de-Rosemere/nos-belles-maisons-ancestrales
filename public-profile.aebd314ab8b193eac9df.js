!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function t(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,c,r,i=[],s=!0,d=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(d)throw o}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=function(e){var t="".concat(window.cloudFront,"/site/images/profile/default-thumb.gz.svg"),n=e.target;n instanceof HTMLImageElement&&n.src!==t&&(n.src=t)},a=function(){var e=document.getElementById("flipbookList");e&&e.addEventListener("error",n,!0),[].forEach.call(document.querySelectorAll("img[data-src]"),(function(e){e.setAttribute("src",e.getAttribute("data-src")),e.addEventListener("load",(function(){e.removeAttribute("data-src")}))}))},o=function(e){return e?Object.keys(e).reduce((function(t,n){return t.push("".concat(n,"=").concat(encodeURIComponent(e[n]))),t}),[]).join("&"):""},c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],r=window,i=r.limit,s=r.accountId,d=r.profileUrl,l=r.excludeId,u=r.apiV2,m=r.folderHash,f=r.totalCollectionsCount,p="0",g=document.getElementById("loadMore"),h=document.getElementById("flipbookList"),w=0,v=!1,y=window.location.href,b=new URL(y).searchParams.get("search")||"",L=document.getElementById("searchCollections");L&&(L.value=b);var E=function(){h.innerHTML='\n                <div class="text-center py-4 mb-0">\n                    No publications found.\n                </div>',h.classList.replace("justify-content-lg-start","justify-content-center")},I=function(e){var t="";e.forEach((function(e){var n,a,o,r,i,s,d=e.datePublished?e.datePublished.split(" ")[0]:"",l='<div class="col-sm-auto p-0 mx-xs-0 my-xs-2 mx-sm-1 my-md-3 px-md-2 align-top flip-card-container">\n                <a\n                    class="flip-card h6"\n                    href="'.concat(window.profileUrl).concat(e.directLink.replace(".html","/full-view.html"),'"\n                >\n                    <span class="flip-image-container">\n                        <img class="d-block rounded" data-src="').concat(e.coverImgSrc,'">\n                    </span>\n                    <strong class="d-inline-block mw-100 font-weight-bold small">\n                        ').concat((i=e.name,s=(new DOMParser).parseFromString("<span>".concat(i,"</span>"),"text/html"),s.documentElement.innerHTML!==i?s.documentElement.textContent:i),"\n                    </strong><br>\n                    ").concat(e.hidePublishDate?"":'<small class="smaller text-muted font-weight-bolder">Published on '.concat((n=new Date(d),a=n.getFullYear(),o=c[parseInt("00".concat(n.getMonth()+1).slice(-2),10)-1],r="00".concat(n.getUTCDate()).slice(-2),"".concat(o," ").concat(r,", ").concat(a)),"</small>"),"\n                </a>\n            </div>");t+=l})),v?t.length?(h.innerHTML=t,v=!1):E():h.innerHTML+=t,a()},x=function(){var e={p:++w,accountId:s,excludeId:l,userUrl:d,folderHash:m||"",searchAfter:p||"0",searchKey:b},n="".concat(u,"/publications/related?").concat(o(e));b&&p&&p.length&&(n="".concat(u,"/publications/loadMore?").concat(o(e))),fetch(n).then((function(e){if(200!==e.status)throw new Error("Invalid response");return e.json()})).catch((function(){g.classList.add("d-none"),h.classList.add("d-none")})).then((function(n){var a=!0;if(n){if(!b&&n&&n.length)I(n),n.length===i&&(a=!1);else if(n[0]&&n[0].length){if(I(n[0]),n[1]&&n[1].length){var o=t(n,2);p=o[1]}n[0].length===i&&(a=!1)}else"0"===p&&1===e.p&&(E(),g.classList.add("d-none"));a?g.classList.add("d-none"):g.classList.remove("disabled")}else h.classList.add("d-none"),g.classList.add("d-none")}))};f&&!m&&(!function(){v=!0;for(var e="",t=0;t<Math.min(f,24);t++)e+='<div class="col-sm-auto p-0 mx-xs-0 my-xs-2 mx-sm-1 my-md-3 px-md-2 align-top flip-card-container">\n                <div class="flip-card">\n                    <div class="flip-image-container-placeholder animate-placeholder"></div>\n                    <div class="d-inline-block flip-title-placeholder animate-placeholder"></div><br>\n                    <div class="flip-publishdate-placeholder animate-placeholder"></div>\n                </div>\n            </div>';h.innerHTML=e}(),g.classList.add("disabled"),x());var k=function(){g.classList.add("disabled"),x()},A=window,C=A.apiV2,_=A.requestParams,S=document.getElementById("enableStartFromPage"),M=document.getElementById("startFromPage"),P=document.getElementById("copytext"),j=document.getElementById("copy-btn"),T=P?P.value:"",F=function(e){if(e){var t=T.indexOf("&")>-1?"&":"?";P.value="".concat(T).concat(t,"p=").concat(e)}else P.value=T},H=function(){window.addEventListener("message",(function(e){if(e.data&&"function"==typeof e.data.split&&("getAccessConfirmation"===e.data.split("-")[0]&&window.frames&&window.frames[0]&&window.flipbookHash)){var t=document.querySelector("#myPlayer iframe, #full-reader-link iframe");t&&t.contentWindow.postMessage("".concat("OKACCESS","-").concat(window.flipbookHash),"*")}}))},B=function(){try{var e=document.getElementById("player-iframe");if(e){var t=window.location.search,n="".concat(e.dataset.src);if(t&&URLSearchParams){var a=new URLSearchParams(t),o=a.get("p"),c=a.get("td");o&&(n+="&p=".concat(o)),c&&(n+="&td=".concat(c))}e.src=n}}catch(e){console.warn(e)}},O="profile",D="details",G="full-view";window.dataLayerForGoogleTagManager=window.dataLayerForGoogleTagManager||[],window.userGtmLayer=window.userGtmLayer||[],window.dataLayer=window.dataLayer||[];var U,N,R,q,z=function(){if("undefined"!=typeof hubspotChatId){var e=document.createElement("script");e.src="//js.hs-scripts.com/".concat(hubspotChatId,".js"),document.head.appendChild(e)}},J=function(){var e={ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied",wait_for_update:500,region:window.cookieConsentCountries},t=document.cookie.split(";");if(void 0!==(t=t.find((function(e){return e.includes("agree_cookie_policy_v")})))){var n=JSON.parse(t.split("=")[1]);1===n.a&&(e.ad_storage="granted",e.ad_user_data="granted",e.ad_personalization="granted"),1===n.p&&(e.analytics_storage="granted",z())}return e};switch($((function(){setTimeout((function(){window.userCustomGtmId&&window.hasAccessToWhiteLabel&&(function(){window.userCustomGtmId?window.userGtmLayer.push(arguments):window.dataLayer.push(arguments)}("consent","default",J()),function(e,t){window[t]=window[t]||[],window[t].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var n=document.getElementsByTagName("script")[0],a=document.createElement("script"),o="dataLayer"!==t?"&l=".concat(t):"";a.async=!0,a.src="//www.googletagmanager.com/gtm.js?id=".concat(e).concat(o),n.parentNode.insertBefore(a,n)}(window.userCustomGtmId,"userGtmLayer"))}),1e3)})),window.profilePage){case O:!window.allFlipsLoaded&&g&&f>i&&(g.classList.remove("d-none"),g.addEventListener("click",k)),a();break;case D:B(),function(){var e=window.HAS_HEADER?70:0;if(window.FREE_PROFILE){var t=parseInt(getComputedStyle(document.documentElement).fontSize,10);e+=1.6*t+.25*t+t}document.documentElement.style.setProperty("--extraContent","".concat(e,"px"))}(),a(),N=$("#requestAccess"),R=$("#accessNotification"),q=$("#accessError"),R.hide(),q.hide(),N.click((function(){R.addClass("d-node"),q.hide(),fetch("".concat(C,"/publications/requestAccess?").concat(o(_))).then((function(e){if(200!==e.status)throw new Error("Invalid response");return e.json()})).catch((function(){q.text("An error occurred, try again later!"),q.show()})).then((function(e){N.hide(),e&&e.success?(R.text(e.message),R.show()):(q.text(e.message),q.show())}))})),(U=$(".popover-handle")).each((function(e,t){var n=$(t).data("class"),a=$(t).data("popover"),o='<div class="popover {className}" role="tooltip">\n    <div class="arrow"></div>\n    <div class="popover-body"></div>\n</div>'.replace("{className}",n);$(t).popover({placement:$(t).data("placement"),content:$(".popover-content.".concat(a)),html:!0,trigger:"click",template:o})})),$(document).on("click",(function(e){U.each((function(t,n){$(n).is(e.target)||0!==$(n).has(e.target).length||0!==$(".popover").has(e.target).length||$(n).popover("hide")}))})),S&&S.addEventListener("click",(function(e){e.stopImmediatePropagation(),M.disabled=!M.disabled,M.classList.toggle("text-muted"),M.disabled?F(null):F(M.value)})),M&&M.addEventListener("change",(function(e){var t=e.target.value;(t=parseInt(t,10))&&t<1&&(t=null),F(t)})),j&&j.addEventListener("click",(function(e){e.preventDefault(),P.select(),document.execCommand("copy")})),H();break;case G:B(),H()}$("#cookieAlert").on("closed.bs.alert",(function(){var e=new Date(Date.now());e.setYear(e.getFullYear()+10),document.cookie="agree_cookie_policy_v=1; path=/; expires=".concat(e)}))}();